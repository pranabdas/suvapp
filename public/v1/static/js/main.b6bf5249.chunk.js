(this.webpackJsonpsuvapp=this.webpackJsonpsuvapp||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(5),r=n.n(c),s=n(4),o=n.n(s),i=n(6),l=n(2),d=n(0);var b=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),b=s[0],u=s[1],j=Object(a.useState)([]),h=Object(l.a)(j,2),p=h[0],x=h[1],f=Object(a.useState)([]),O=Object(l.a)(f,2),m=O[0],g=O[1],y=Object(a.useState)("No data file selected yet."),v=Object(l.a)(y,2),w=v[0],S=v[1],I=Object(a.useState)(-1),k=Object(l.a)(I,2),C=k[0],E=k[1],P=Object(a.useState)(""),N=Object(l.a)(P,2),T=N[0],F=N[1],A=Object(a.useState)([]),D=Object(l.a)(A,2),L=D[0],U=D[1],_=Object(a.useState)(0),R=Object(l.a)(_,2),V=R[0],Y=R[1],B=Object(a.useState)(1),X=Object(l.a)(B,2),M=X[0],z=X[1],J=Object(a.useState)(-1),q=Object(l.a)(J,2),G=q[0],H=q[1];return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h3",{style:{color:"#15847b"},children:"Convert SUV beamline data"}),Object(d.jsx)("hr",{}),Object(d.jsx)("br",{}),Object(d.jsxs)("form",{className:"form",children:[Object(d.jsx)("p",{children:"Select data file:"}),Object(d.jsx)("input",{type:"file",onChange:function(e){c(e.target.files[0].name);var t=new FileReader;t.readAsText(e.target.files[0]),t.onload=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,a=n.split("\n"),x(a),S("File selected"),E(-1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},style:{width:"250px",fontSize:"0.9em",cursor:"pointer"},title:"Select data file"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{children:["Set scan number (default ",Object(d.jsx)("code",{children:"-1"})," reads the last scan):"]}),Object(d.jsx)("input",{type:"number",id:"scan",name:"scan",value:C,onChange:function(e){E(parseInt(e.target.value))}}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{children:["Set X column index below (indexing starts from ",Object(d.jsx)("code",{children:"0"}),"):"]}),Object(d.jsx)("input",{type:"number",id:"xCol",name:"xCol",value:V,onChange:function(e){Y(parseInt(e.target.value))}}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:"Set Intensity column index below:"}),Object(d.jsx)("input",{type:"number",id:"ICol",name:"ICol",value:M,onChange:function(e){z(parseInt(e.target.value))}}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsxs)("p",{children:["Set I",Object(d.jsx)("sub",{children:"0"})," column index below (leave ",Object(d.jsx)("code",{children:"-1"}),", if you do not need to divide by I",Object(d.jsx)("sub",{children:"0"}),"):"]}),Object(d.jsx)("input",{type:"number",id:"I0Col",name:"I0Col",value:G,onChange:function(e){H(parseInt(e.target.value))}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){var e=performance.now();if(!p.length)return S("Input file is empty."),g([]),U([]),void F("");if(!C&&0!==C)return S("Please enter a valid scan number."),g([]),U([]),void F("");for(var t,a=[],c=[],r=0;r<p.length;r++)"#S"===p[r].split(" ")[0]&&(a.push(parseInt(p[r].split(" ")[1])),c.push(r+1));if(-1===C?(t=a.length-1,E(a[a.length-1])):t=a.indexOf(C),-1===t)return S("Scan number ".concat(C," not found.")),g([]),U([]),void F("");var s,o=c[t];s=t===a.length-1?p.length-1:c[t+1]-1;for(var i=[],l=[],d=0;d<s-o;d++)"#"!==p[d+o][0]&&p[d+o]?i.push(p[d+o].split(" ")):"#L"===p[d+o].slice(0,2)&&(l=(l=(l=p[d+o]).split(" ")).filter((function(e){return e}))).shift();l.length?(U(l),F("Column names:")):(U([]),F(["No column name found in the header."]));for(var b=0;b<i.length;b++)for(var j=0;j<i[0].length;j++)i[b][j]=parseFloat(i[b][j]);if(!i.length)return S("Empty data! Please check data file and inputs."),void g([]);if(!V&&0!==V)return S("Please enter a valid X-col index."),void g([]);if(!M&&0!==M)return S("Please enter a valid intensity-col index."),void g([]);if(!G&&0!==G)return S("Please enter a valid I_0-col index."),void g([]);if(V>i[0].length-1||V<0)return S("X-column index is out of range."),void g([]);if(M>i[0].length-1||M<0)return S("Intensity-column index is out of range."),void g([]);if(G>i[0].length-1||G<-1)return S("I_0-column index is out of range."),void g([]);var h=new Array(i.length);if(-1===G)for(var x=0;x<i.length;x++)h[x]=[i[x][V],i[x][M].toExponential()];else for(var f=0;f<i.length;f++)h[f]=[i[f][V],(i[f][M]/i[f][G]).toExponential()];g(h);var O=performance.now();h.length?S("Success! Processed in ~".concat(parseInt(O-e+1+10*Math.random())," millisecond.")):S("Empty output! Please check your data file and inputs, and try again!"),[".csv",".dat",".txt"].includes(n.slice(n.length-4,n.length).toLowerCase())?u(n.slice(0,n.length-4)+"_scan_"):u(n+"_scan_")},className:"btn",children:"Process Data"}),Object(d.jsx)("button",{onClick:function(){return window.location.reload()},className:"btn",children:"Start Over"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{className:"status",children:Object(d.jsxs)("code",{children:[Object(d.jsx)("b",{children:"Status: "}),w]})})]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("button",{className:"btn",onClick:function(){if(m.length){for(var e="",t=0;t<m.length-1;t++)e=e.concat("".concat(m[t][0],",").concat(parseFloat(m[t][1]).toExponential(),"\r\n"));e=e.concat("".concat(m[m.length-1][0],",").concat(parseFloat(m[m.length-1][1]).toExponential()));var n=document.createElement("a"),a=new Blob([e],{type:"text/csv"});n.href=URL.createObjectURL(a),n.download=b+C+".csv",document.body.appendChild(n),n.click()}else S("Empty output! Please check your data file and inputs, and try again!"),alert("Empty output! Please check your data file and inputs, and try again!")},children:"Save as CSV"}),Object(d.jsx)("button",{className:"btn",onClick:function(){if(m.length){for(var e="",t=0;t<m.length;t++)e=e.concat("".concat(m[t][0],"\t").concat(parseFloat(m[t][1]).toExponential(),"\r\n"));var n=document.createElement("a"),a=new Blob([e],{type:"text/plain"});n.href=URL.createObjectURL(a),n.download=b+C+".txt",document.body.appendChild(n),n.click()}else S("Empty output! Please check your data file and inputs, and try again!"),alert("Empty output! Please check your data file and inputs, and try again!")},children:"Save as TXT"}),Object(d.jsx)("button",{className:"btn",onClick:function(){if(m.length){for(var e="",t=0;t<m.length;t++)e=e.concat("".concat(m[t][0],"\t").concat(parseFloat(m[t][1]).toExponential(),"\r\n"));S("Data copied to clipboard. Now you can directly paste into Origin/Igor/Excel tables."),navigator.clipboard.writeText(e)}else S("Empty clipboard! Please check your data file and inputs, and try again!"),navigator.clipboard.writeText("")},children:"Copy to Clipboard"})]}),Object(d.jsxs)("p",{style:{marginLeft:"1em"},children:[Object(d.jsx)("br",{}),Object(d.jsx)("b",{children:T}),Object(d.jsxs)("code",{children:[Object(d.jsx)("br",{}),L.map((function(e,t){return t<10?Object(d.jsxs)("li",{style:{listStyle:"none"},children:["\xa0",t," \xbb ",e]},t):Object(d.jsxs)("li",{style:{listStyle:"none"},children:[t," \xbb ",e]},t)}))]}),Object(d.jsx)("br",{})]})]})};var u=function(){return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"readMe",children:[Object(d.jsx)("h4",{style:{textAlign:"center",fontSize:"1.2em"},children:"Read me"}),Object(d.jsxs)("p",{children:["This program can read SUV beamline data format, and export two needed columns of which first column is usually energy or angle and second column is intensity (or I/I",Object(d.jsx)("sub",{children:"0"}),", if you have set I",Object(d.jsx)("sub",{children:"0"})," index) to ",Object(d.jsx)("b",{children:".csv"})," or"," ",Object(d.jsx)("b",{children:".txt"})," plaintext formats. You can also copy data to clipboard, and directly paste into Origin/ Igor/ Excel tables, or any other program.",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),"Select your data file, set scan number and column indices, and click"," ",Object(d.jsx)("b",{children:"Process\xa0Data"}),". Data columns will be listed above once the file is processed (if your file has column name header). You can re-enter the column indices, and click ",Object(d.jsx)("b",{children:"Process\xa0Data"})," button again if you have chosen wrong columns, or you can change the scan number to process multiple scans from the same input file. Note that column header names might not match actual data columns, please consult with beamline personal about your data file format.",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),"You may not be able to enter ",Object(d.jsx)("code",{children:"-1"})," in some fields by start typing with ",Object(d.jsx)("code",{children:"-"})," sign. Please type ",Object(d.jsx)("code",{children:"1"})," first, and then move the cursor to the beginning and enter ",Object(d.jsx)("code",{children:"-"})," sign. Alternatively, you may enter ",Object(d.jsx)("code",{children:"0"})," and use the down arrow to set ",Object(d.jsx)("code",{children:"-1"})," if your browser supports.",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),"If you upload a new data file with the same name as currently uploaded file, some browsers may not trigger the event which this program relies on updating the states. In such cases, please use the"," ",Object(d.jsx)("b",{children:"Start\xa0Over"})," button before uploading new file with the same name. A sample data file can be found"," ",Object(d.jsx)("a",{href:"https://suv.netlify.app/data.txt",target:"_blank",children:"here"}),".",Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),"This is a client side application. All data are processed in your computer locally. Once the webapp (less than 1\xa0MB) is loaded in your browser, you do not require internet connection to process your files. Want to improve this application, or curious to find out how it works? View code on"," ",Object(d.jsx)("a",{href:"https://github.com/pranabdas/suvapp",children:"GitHub"}),". You can also check out"," ",Object(d.jsx)("a",{href:"https://pranabdas.github.io/suvtools/",children:"SUV Python Tools"})," ","which offers more functionality. If you find any bug or have feedback, please let me know. Thank you."]})]})})};var j=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"banner",children:Object(d.jsxs)("p",{children:["This is an older version of the app. The latest version is available"," ",Object(d.jsx)("a",{href:"https://suv.netlify.app",children:"here"}),"."]})}),Object(d.jsx)(b,{}),Object(d.jsx)(u,{}),Object(d.jsxs)("footer",{children:["\xa9 Copyright ",(new Date).getFullYear().toString()," ",Object(d.jsx)("a",{href:"https://pranabdas.github.io/",children:"Pranab Das"}),". All rights reserved."]})]})};n(13);r.a.render(Object(d.jsx)(j,{}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b6bf5249.chunk.js.map